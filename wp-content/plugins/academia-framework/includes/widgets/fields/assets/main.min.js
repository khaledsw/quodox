"use strict";var widget_acf={acf_init:function(){jQuery("h3.title",".widget_acf_accordion").off();jQuery("h3.title",".widget_acf_accordion").click(function(){var c=jQuery(this).parent();var d=jQuery(".fieldset",c);var b=d.attr("data-collapse");if((typeof b)=="undefined"||b=="1"){d.slideDown();d.attr("data-collapse","0");jQuery("span",jQuery(this)).removeClass("collapse-in");jQuery("span",jQuery(this)).addClass("collapse-out")}else{d.slideUp();d.attr("data-collapse","1");jQuery("span",jQuery(this)).removeClass("collapse-out");jQuery("span",jQuery(this)).addClass("collapse-in")}});jQuery('input[data-title="1"]',".widget_acf_accordion").keyup(function(){var b=jQuery(this).val();var c=jQuery(this).attr("data-section-id");if(b==""){b="New Section"}jQuery("span:last-child","#"+c+" h3.title").text(b)});jQuery('input[data-title="1"]',".widget_acf_accordion").off();jQuery('input[data-title="1"]',".widget_acf_accordion").keyup(function(){var b=jQuery(this).val();var c=jQuery(this).attr("data-section-id");if(b==""){b="New Section"}jQuery("span:last-child","#"+c+" h3.title").text(b)});jQuery(".button.add",".widget_acf_wrap").off();jQuery(".button.add",".widget_acf_wrap").click(function(){widget_acf.addSection(jQuery(this))});jQuery(".button.deletion",".widget_acf_wrap").off();jQuery(".button.deletion",".widget_acf_wrap").click(function(){widget_acf.delSection(jQuery(this))});var a=jQuery(".widget_acf_wrap");widget_acf.initSelect2(a);widget_acf.uploadImage();widget_acf.initCheckbox(a);widget_acf.registerRequireElement(a);jQuery("input, select",a).each(function(){widget_acf.initRequireElement(jQuery(this))});if(jQuery.isFunction(jQuery.fn.sortable)){jQuery(".accordion-wrap").sortable({update:function(){widget_acf.reIndexSection(jQuery(".widget_acf_wrap"))}})}},addSection:function(b){var d=jQuery(b).parent().parent();var c=jQuery(".widget_acf_accordion",d).last().clone(true);jQuery("input",jQuery(c)).each(function(){jQuery(this).val("")});jQuery(".media img",c).remove();jQuery(".media .remove-media",c).remove();jQuery("h3.title span",c).last().html("New Section");jQuery(".fieldset",c).attr("data-collapse",0);jQuery(".fieldset",c).show();jQuery("input",c).first().focus();jQuery(".widget_acf_accordion",d).last().after(c);widget_acf.reIndexSection(b);var a=jQuery(".widget_acf_accordion",d).last();jQuery("div.select-wrap",a).each(function(){var e=jQuery("label",jQuery(this)).clone(false);var f=jQuery("select",jQuery(this)).clone(false);var g=jQuery('input[type="hidden"]',jQuery(this)).clone(false);f.removeClass("select2-offscreen");jQuery(this).empty();if(typeof e!="undefined"){jQuery(this).append(e)}if(typeof g!="undefined"){jQuery(this).append(g)}if(typeof f!="undefined"){jQuery(this).append(f)}});widget_acf.initSelect2(a);widget_acf.initCheckbox(a);widget_acf.registerRequireElement(a)},delSection:function(b){var a=jQuery(b).parent().parent().parent().parent();var d=jQuery(".widget_acf_accordion",jQuery(a)).length;var c=jQuery(b).parent().parent().parent();if(d>1){jQuery(c).remove();widget_acf.reIndexSection(b)}else{jQuery("input",jQuery(a)).each(function(){jQuery(this).val("")});jQuery("h3.title span",jQuery(a)).last().html("New Section")}},uploadImage:function(){jQuery(".widget-acf-upload-button").each(function(){jQuery(this).off();jQuery(this).click(function(a){a.preventDefault();if(wp.media.frames.gk_frame){wp.media.frames.gk_frame.open();wp.media.frames.gk_frame.clicked_button=jQuery(this);return}wp.media.frames.gk_frame=wp.media({title:"Select image",multiple:false,library:{type:"image"},button:{text:"Use selected image"}});wp.media.frames.gk_frame.clicked_button=jQuery(this);var b=function(){var c=wp.media.frames.gk_frame.state().get("selection");if(!c){return}c.each(function(h){var d=h.attributes.url;var i=jQuery(wp.media.frames.gk_frame.clicked_button).parent();var g=jQuery("img",i);var f=jQuery("a.remove-media",i);var j=jQuery('input[data-type="id"]',i);var l=jQuery('input[data-type="url"]',i);var e=wp.media.frames.gk_frame.clicked_button.attr("data-width");var k=wp.media.frames.gk_frame.clicked_button.attr("data-height");if(typeof e=="undefined"){e=46}if(typeof k=="undefined"){k=28}if(g.length<=0){g='<img src="" width="'+e+'" height="'+k+'">';g=jQuery(g)}g.attr("src",d);l.val(d);j.val(h.attributes.id);i.prepend(g);if(f.length<=0){f=jQuery('<a href="javascript:void(0);" class="button remove-media">Remove</a>');f.insertAfter(wp.media.frames.gk_frame.clicked_button)}widget_acf.removeImage(i)})};wp.media.frames.gk_frame.on("select",b);wp.media.frames.gk_frame.open()});widget_acf.removeImage(jQuery(this).parent())})},removeImage:function(a){jQuery(".remove-media",a).off();jQuery(".remove-media",a).click(function(){var c=jQuery('input[data-type="id"]',a);var d=jQuery('input[data-type="url"]',a);var b=jQuery("img",a);b.remove();d.val("");c.val("");jQuery(this).remove()})},initSelect2:function(a){if(jQuery.isFunction(jQuery.fn.select2)){jQuery("select.select2",a).each(function(){var b="#s2id_"+jQuery(this).attr("id");var e=jQuery(b,jQuery(this).parent());if(typeof(e)!="undefined"){e.remove()}jQuery(this).select2({allowClear:true});var g=jQuery(this).attr("data-multiple");if(typeof(g)!="undefined"&&g=="1"){var h=jQuery("input",jQuery(this).parent()).first();var c=jQuery(h).val();var k=[];if(typeof(c)!="undefined"&&c!=""){c=c.split(",");for(var d=0;d<c.length;d++){var f=jQuery("option[value="+c[d]+"]",jQuery(this));k[d]={id:c[d],text:f[0].label,element:f}}jQuery(this).select2("data",k)}jQuery(this).on("select2-selecting",function(l){var i=jQuery(this).val();if(typeof(i)=="undefined"||i==null){i=""}if(i!=""){i+=","}i+=l.val;jQuery(h).val(i)}).on("select2-removed",function(o){var n=jQuery(h).val();var m=n.split(",");var p="";for(var l=0;l<m.length;l++){if(m[l]!=o.val){if(p!=""){p+=","}p+=m[l]}}jQuery(h).val(p)})}var j=jQuery(this).attr("data-select-icon");if(typeof j!="undefined"&&j=="1"){jQuery(this).select2({formatResult:widget_acf.formatIconState,formatSelection:widget_acf.formatIconState})}})}},initCheckbox:function(a){jQuery(".checkbox",a).each(function(){var b=jQuery(this);b.off();b.change(function(){if(b.is(":checked")){b.val("1")}else{b.val("0")}})})},reIndexSection:function(a){var b=".widget_acf_wrap";var d=".widget_acf_accordion";var c="widget_acf_accordion_";jQuery(d,b).each(function(e){e--;jQuery(this).attr("id",c+e);jQuery("input",jQuery(this)).each(function(){if(typeof jQuery(this).attr("name")!="undefined"){jQuery(this).attr("name",jQuery(this).attr("name").replace(/\[(\d+)\](?!.*\[\d+\])/,"["+e+"]"))}jQuery(this).attr("id",jQuery(this).attr("id").replace(/[0-9]$/,e));jQuery(this).attr("data-section-id",(c+e))});jQuery("div[data-require-element-id]",jQuery(this)).each(function(){jQuery(this).attr("data-require-element-id",jQuery(this).attr("data-require-element-id").replace(/[0-9]$/,e))});jQuery("select",jQuery(this)).each(function(){if(typeof jQuery(this).attr("name")!="undefined"){jQuery(this).attr("name",jQuery(this).attr("name").replace(/\[(\d+)\](?!.*\[\d+\])/,"["+e+"]"))}jQuery(this).attr("id",jQuery(this).attr("id").replace(/[0-9]$/,e))});jQuery("a.button.deletion").each(function(){jQuery(this).attr("data-section-id",(c+e))})})},registerRequireElement:function(a){jQuery("input, select",a).change(function(){widget_acf.initRequireElement(jQuery(this))})},initRequireElement:function(a){var c=a.attr("id");var b=a.val();jQuery('div[data-require-element-id="'+c+'"]').each(function(){var f=jQuery(this).attr("data-require-compare");var e=jQuery(this).attr("data-require-values");if(typeof e!="undefined"&&e!=""){e=e.split(",")}var d=false;if(f=="!="){d=true}jQuery.each(e,function(h,g){if(g==b){d=f=="=";return}});if(d){jQuery(this).show()}else{jQuery(this).hide()}})},formatIconState:function(b){if(!b.id){return b.text}var a=jQuery('<span><i class="'+b.element[0].value.toLowerCase()+'"/> '+b.text+"</span>");return a}};