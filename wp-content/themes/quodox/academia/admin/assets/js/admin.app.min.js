!function(a){"use strict";var b={initialize:function(){b.meta_box_tab(),b.process_post_format(),b.required_field(),b.header_layout_hover(),b.initTaxMetaIconSelect()},meta_box_tab:function(){var a=jQuery(meta_box_ids);jQuery("#normal-sortables").after('<div class="g5plus-meta-tabs-wrap postbox"><div class="handlediv" title="Click to toggle"><br></div><h3 class="hndle"><span>Meta Options</span></h3><div id="g5plus-tabbed-meta-boxes"></div></div>'),jQuery(a).appendTo("#g5plus-tabbed-meta-boxes"),jQuery(a).hide().removeClass("hide-if-no-js");for(var b=0,c=a.length;c>b;b++){var d="editor-tab"+b;jQuery(a[b]).addClass(d)}for(var e='<ul id="g5plus-meta-box-tabs" class="clearfix">\n',f=0,g=0,h=a.length;h>g;g++){var i=jQuery(a[g]).attr("id"),j=jQuery(a[g]).find(".hndle > span").text(),k="";jQuery(a[g]).hasClass("hide-if-js")&&f++,e=e+'\n<li id="li-'+i+'" class="'+k+'"><a href="#" rel="editor-tab'+g+'">'+j+"</a></li>"}e+="\n</ul>",jQuery("#g5plus-tabbed-meta-boxes").before(e),jQuery("#g5plus-meta-box-tabs a:first").addClass("active"),jQuery(".editor-tab0").addClass("active").show(),jQuery(".g5plus-meta-tabs-wrap").on("click",".handlediv",function(){var a=jQuery(this).parent();a.hasClass("closed")?a.removeClass("closed"):a.addClass("closed")}),jQuery("#g5plus-meta-box-tabs li").on("click","a",function(){jQuery(a).removeClass("active").hide(),jQuery("#g5plus-meta-box-tabs a").removeClass("active");var b=jQuery(this).attr("rel");return jQuery(this).addClass("active"),jQuery("."+b).addClass("active").show(),!1})},process_post_format:function(){var b="g5plus_",c=a("input[name=post_format]","#post-formats-select"),d=a('[id^="'+b+'meta_box_post_format_"]').hide();c.change(function(){d.hide(),a("#"+b+"meta_box_post_format_"+a(this).val()).show()}),c.filter(":checked").trigger("change"),a("body").on("change",".checkbox-toggle input",function(){var b,c=a(this),d=c.closest(".checkbox-toggle");b=d.hasClass("reverse")?c.is(":checked")?"slideUp":"slideDown":c.is(":checked")?"slideDown":"slideUp",d.next()[b]()}),a(".checkbox-toggle input").trigger("change")},required_field:function(){var b=[];a("[data-required-ref]").each(function(){var c=a(this),d=c.attr("data-required-ref"),e=c.attr("data-required-operator"),f=c.attr("data-required-value"),g=f.split(",");a("#"+d).is(":checkbox")?a("#"+d).prop("checked")?b[d]=a("#"+d).val():b[d]="0":b[d]=a("#"+d).val(),-1!=g.indexOf(b[d])&&"="==e||-1==g.indexOf(b[d])&&"<>"==e?a(this).show():a(this).hide()});for(var c in b)a("#"+c).change(function(){var b=a(this),c=a(this).attr("id"),d="";d=b.is(":checkbox")?b.prop("checked")?b.val():"0":b.val(),a('[data-required-ref="'+c+'"]').each(function(){var b=a(this),c=b.attr("data-required-operator"),e=b.attr("data-required-value"),f=e.split(",");-1!=f.indexOf(d)&&"="==c||-1==f.indexOf(d)&&"<>"==c?a(this).slideDown():a(this).slideUp()})})},header_layout_hover:function(){a("#g5plus_megatron_options-header_layout li.redux-image-select").on("hover",function(b){var c=(a(this),a(this).closest("tr"));if(0!=c.length){var d=a("label > img",this).attr("src"),e=a("label > input",this).attr("value"),f=d.replace(e+".png",e+"-hover.png");"mouseenter"==b.type?(0==a(".header-layout-hover-wrapper").length&&a(c).after('<tr class="header-layout-hover-wrapper"><td colspan="2"><img src="'+f+'"/></td></tr>'),a(".header-layout-hover-wrapper img").attr("src",f),a(".header-layout-hover-wrapper").show()):a(".header-layout-hover-wrapper").hide()}})},initTaxMetaIconSelect:function(){jQuery.isFunction(jQuery.fn.select2)&&a(".at-select").select2({formatResult:b.formatIconState,formatSelection:b.formatIconState})},formatIconState:function(b){if(!b.id)return b.text;var c=a('<span><i class="'+b.element[0].value.toLowerCase()+'"/> '+b.text+"</span>");return c}};a(document).ready(function(){b.initialize()})}(jQuery);